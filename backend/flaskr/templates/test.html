<!DOCTYPE html>

<html>
    <head>
        <title>KlayTracker</title>

        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
        <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
        <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>

        <script>
            $.getJSON( "http://127.0.0.1:5000/test", function( data ) {
                var items = [];

                $.each( data, function( key, val ) {
                    items.push( "<li id='" + key + "'>" + key + ":" + val + "</li>" );
                });

                $( "<ul/>", {
                    html: items.join( "" )
                }).appendTo( "body" );
            });
        </script>
    </head>

    <body>
        <header class="navbar sticky-top shadow" style="background-color:darkblue; color:white;">

            <div class="col-1" style="text-align:center">[Logo]</div>
            <div class="col-4">
                <h1 style="padding:1%"><b>  KlaytnTracker</b></h1>
                <label align="center" style="text-align:left;padding-bottom:2%;">  by G32</label>
            </div>

            <div class="col"></div>
        </header>

        <div style="padding:2%;">
        <h2>Dashboard</h2>

        <div class="card shadow">
            <div class="card-head">
                <h6>Graph</h6>
            </div>
            <div class="card-body">
                <div>
                    <canvas id="myChart"></canvas>
                </div>

                <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                <script>
                    $.getJSON( "http://127.0.0.1:5000/test2", function( data ) {
                        const ctx = document.getElementById('myChart');
                        const values = [];

                        $.each( data, function( key, val ) {
                            values.push( val );
                        });

                        new Chart(ctx, {
                            type: 'line',
                            data: {
                            labels: ['1', '2', '3', '4', '5', '6'],
                            datasets: [{
                                label: '# of Votes',
                                data: values,
                                borderWidth: 1
                            }]
                            },
                            options: {
                            scales: {
                                y: {
                                beginAtZero: true
                                }
                            }
                            }
                        });
                    });
                </script>
            </div>
        </div>

    </body>
</html>

